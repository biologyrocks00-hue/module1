<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cell Cycle</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    />

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
      .correct {
        background-color: #d4edda;
      }
      .incorrect {
        background-color: #f8d7da;
      }
      input[type="checkbox"] {
        transform: scale(1.2);
        cursor: pointer;
      }

      .result {
        text-align: center;
        font-weight: bold;
      }

      .lecture-title {
        background: #2e7d32;
        color: white;
        padding: 30px;
        border-radius: 10px;
        text-align: center;
        margin-bottom: 30px;
      }
      .lecture-card {
        background: white;
        border-left: 6px solid #66bb6a;
        margin-bottom: 20px;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      }
      .structure-title {
        font-weight: 600;
        color: #1b5e20;
      }
      .function-text {
        margin-top: 8px;
      }
      .input-group-text {
        white-space: normal;
        word-break: break-word;
      }

      .rotate-icon {
        display: inline-block;
        transition: transform 0.3s ease;
      }

      .rotate-icon.rotated {
        transform: rotate(180deg);
      }
      hr {
        font-weight: 900;
        color: #198754;
      }
      .modal.fade.show {
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(20px); /* Safari */
        background-color: rgba(0, 0, 0, 00.8);
      }
      body {
        background-color: #f8f9fa;
      }
      .lecture-header {
        background: linear-gradient(135deg, #198754, #20c997);
        color: white;
      }
      .lecture-content p {
        text-align: justify;
      }
      body {
        background: #f4f6f9;
      }
      .feedback {
        display: block;
        margin-top: 4px;
        font-size: 0.85rem;
      }

      .feedback.correct {
        color: #198754; /* green */
      }

      .feedback.incorrect {
        color: #dc3545; /* red */
      }

      /* Optional: color the textbox border */
      .input-correct {
        border-color: #198754;
      }

      .input-incorrect {
        border-color: #dc3545;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="lecture-header py-4 mb-4">
      <div class="container">
        <h1 class="fw-bold">Lesson 5: Cell Cycle</h1>
      </div>
    </header>

    <!-- Main Content -->
    <main class="container lecture-content mb-5">
      <!-- Introduction Card -->
      <div class="card mb-5 shadow-sm">
        <div class="card-body">
          <p class="card-text">
            Every single second, millions of cells in your body are making a
            high-stakes decision: to divide or to die.
          </p>
          <p class="card-text">
            Right now, as you read this sentence, your body is a bustling
            construction site. Somewhere in your skin, a cell is stretching,
            duplicating its blueprints, and snapping into two fresh copies to
            heal a tiny scratch. Inside your bone marrow, cells are sprinting
            through a biological "to-do list" to keep your blood flowing.
          </p>
          <p class="card-text">
            This isn't just biology; it’s the ultimate survival relay race. From
            a single fertilized egg to the trillions of cells that make you you,
            the Cell Cycle is the rhythmic heartbeat of growth, repair, and life
            itself.
          </p>
          <h5>
            Are you ready to go behind the scenes of the world's most perfect
            duplication machine? Let’s dive in!
          </h5>
        </div>
      </div>
      <fieldset class="border rounded-3 p-2 my-5 position-relative">
        <legend class="float-none w-auto px-3 fw-semibold">
          Module: The Cycle of Life – Understanding Cell Division
        </legend>
        <p class="fst-italic">
          Welcome to this module on the Cell Cycle. This guide will take you
          through the fascinating process of how a single cell prepares, grows,
          and eventually divides to create new life.
        </p>
      </fieldset>

      <div class="card mb-5">
        <div class="card-body">
          <h5>What I Need to Know</h5>
          <p class="card-text">
            By the end of this module, you should be able to:
          </p>
          <ul class="list-group-numbered">
            <li class="list-group-item">
              Identify the distinct stages of the cell cycle (Interphase and
              M-phase).
            </li>
            <li class="list-group-item">
              Describe the specific events that occur in $G_1$, $S$, and $G_2$
              phases.
            </li>
            <li class="list-group-item">
              Explain the importance of the cell cycle in growth, repair, and
              reproduction.
            </li>
            <li class="list-group-item">
              Distinguish between <strong>Mitosis</strong> (nuclear division)
              and <strong>Cytokinesis</strong> (cytoplasmic division).
            </li>
          </ul>
          <h5>What’s In</h5>
          <p class="card-text">
            In your previous lessons, you learned that the
            <strong>cell</strong> is the basic unit of life. You explored cell
            organelles like the nucleus, which contains our genetic blueprint
            (DNA). But have you ever wondered how an injury heals or how a tiny
            seedling turns into a massive tree? It all comes down to the cell's
            ability to replicate itself.
          </p>
          <h5>What’s New</h5>
          <p class="card-text">
            Imagine a factory that needs to double its production. It doesn't
            just "split" in half instantly. It must first:
          </p>
          <ul class="list-group-numbered">
            <li class="list-group-item">Build more machinery (G1 Phase)</li>
            <li class="list-group-item">
              Photocopy all the blueprints (S Phase)
            </li>
            <li class="list-group-item">
              Double-check everything for errors (G2 Phase)
            </li>
            <li class="list-group-item">
              Physically divide the building into two (M Phase)
            </li>
          </ul>
          <p class="card-text">
            This organized "to-do list" is what we call the
            <strong>Cell Cycle</strong>.
          </p>
          <h5>What is it?</h5>
          <p class="card-text">
            The cell cycle is a repeating series of events that include growth,
            DNA synthesis, and cell division. It is divided into two main
            periods:
          </p>
          <div class="d-flex justify-content-center">
            <img
              src="../images/the_cell_cycle.png"
              alt=""
              class="img-fluid img-thumbnail"
            />
          </div>

          <h4>1. Interphase (The Preparation Phase)</h4>
          <p class="card-text">
            This is the longest part of the cycle (about 90% of the time).
          </p>
          <ul>
            <li>
              <strong>$G_1$ Phase (Gap 1):</strong> The cell grows physically
              larger, copies organelles, and makes the molecular building blocks
              it will need later.
            </li>
            <li>
              <strong>$S$ Phase (Synthesis):</strong> The cell synthesizes a
              complete copy of the DNA in its nucleus.
            </li>
            <li>
              <strong>$G_2$ Phase (Gap 2):</strong> Further growth and protein
              synthesis; the cell "double-checks" the duplicated chromosomes for
              errors.
            </li>
          </ul>
          <div class="d-flex justify-content-center">
            <img
              src="../images/interphase.png"
              alt=""
              class="img-fluid img-thumbnail"
            />
          </div>

          <h4>2. M-Phase (The Division Phase)</h4>
          <ul>
            <li>
              Mitosis: The division of the nucleus. It consists of Prophase,
              Metaphase, Anaphase, and Telophase.
            </li>
            <li>
              Cytokinesis: The division of the cytoplasm, resulting in two
              distinct "daughter cells."
            </li>
          </ul>
          <div class="d-flex justify-content-center">
            <img
              src="../images/mitosis.png"
              alt=""
              class="img-fluid img-thumbnail"
            />
          </div>

          <p class="card-text">
            A scientific diagram illustrating four stages of animal cell
            mitosis: prophase, metaphase, telophase, and cytokinesis, showing
            chromosomes and spindle fibers within blue cells on a dark
            background.
          </p>
          <div class="d-flex justify-content-center">
            <img
              src="../images/cell_process.png"
              alt=""
              class="img-fluid img-interphase"
            />
          </div>
        </div>
      </div>
      <div class="pb-5">
        <div class="card my-5 p-2 mb-5">
          <div class="card-body">
            <h5>What's More: Practice Test</h5>
            <h6 class="mb-3">True or False?</h6>
            <div class="input-group mb-1">
              <input type="text" class="form-control" id="tf1" />
              <span class="input-group-text">
                DNA replication happens during the M-phase.
              </span>
            </div>
            <div id="tf1-feedback" class="feedback"></div>

            <div class="input-group mb-1">
              <input type="text" class="form-control" id="tf2" />
              <span class="input-group-text">
                Interphase is the resting stage where nothing happens.
              </span>
            </div>
            <div id="tf2-feedback" class="feedback"></div>

            <div class="input-group mb-1">
              <input type="text" class="form-control" id="tf3" />
              <span class="input-group-text">
                G₁ is primarily for cell growth.
              </span>
            </div>
            <div id="tf3-feedback" class="feedback"></div>

            <div class="input-group mb-1">
              <input type="text" class="form-control" id="tf4" />
              <span class="input-group-text">
                Cytokinesis happens after the nucleus has divided.
              </span>
            </div>
            <div id="tf4-feedback" class="feedback"></div>

            <button class="btn btn-primary mt-3" onclick="checkTrueFalse()">
              Submit Answers
            </button>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white py-3 fixed-bottom">
      <div class="container d-flex justify-content-end">
        <p class="fst-italic px-md-3">
          Please answer the exam after you have studied the lecture properly
        </p>
        <button
          class="btn btn-success"
          data-bs-toggle="modal"
          data-bs-target="#examModal"
        >
          Answer Exam
        </button>
      </div>
    </footer>

    <!-- Exam Modal -->
    <div
      class="modal fade"
      id="examModal"
      tabindex="-1"
      data-bs-backdrop="static"
    >
      <div
        class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable"
      >
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Lesson 3 EXAM</h5>
          </div>

          <div class="modal-body">
            <form id="examForm">
              <div class="row">
                <div class="col-md-6">
                  <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon1"
                      >Name:</span
                    >
                    <input
                      type="text"
                      class="form-control"
                      name="student_name"
                      aria-describedby="basic-addon1"
                    />
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon1"
                      >Grade and Section:</span
                    >
                    <input
                      type="text"
                      class="form-control"
                      name="grade_n_section"
                      aria-describedby="basic-addon1"
                    />
                  </div>
                </div>
              </div>
              <hr />
              <div class="card bg-success text-white mb-5">
                <div class="card-body">
                  <h4>What I Need to Do (Performance Task)</h4>
                  <p class="card-text">
                    To demonstrate your understanding, complete the following
                    activity:
                  </p>
                  <h5>The "Cell Cycle Clock" Project</h5>
                  <ul class="list-group-numbered">
                    <li class="list-group-item">
                      Draw a large circle on a piece of paper.
                    </li>
                    <li class="list-group-item">
                      Divide the circle into sections representing $G_1$, $S$,
                      $G_2$, and Mitosis (remember that Interphase should take
                      up most of the circle).
                    </li>
                    <li class="list-group-item">
                      Inside each section, draw one "key event" (e.g., drawing
                      two sets of DNA in the S-phase section).
                    </li>
                    <li class="list-group-item">
                      Color-code your clock: Use cool colors (blue/green) for
                      Interphase and warm colors (red/orange) for the M-phase.
                    </li>
                  </ul>
                </div>
              </div>
              <p class="fw-bold fst-italic">Select the best answer.</p>

              <div class="container-fluid my-3">
                <hr class="text-danger" />
                <hr />
                <!-- Q1 -->
                <div class="mb-3">
                  <label class="form-label fw-bold"
                    >Which phase involves the actual copying of DNA?
                  </label>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="q1"
                      value="A"
                      id="q1a"
                    />
                    <label class="form-check-label" for="q1a">$G_1$ </label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="q1"
                      value="B"
                      id="q1b"
                    />
                    <label class="form-check-label" for="q1b">$S$</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="q1"
                      value="C"
                      id="q1c"
                    />
                    <label class="form-check-label" for="q1c">$G_2$</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="q1"
                      value="D"
                      id="q1d"
                    />
                    <label class="form-check-label" for="q1d">Mitosis</label>
                  </div>
                </div>
                <hr />
                <!-- Q2 -->
                <div class="mb-3">
                  <label class="form-label fw-bold"
                    >If a cell has 10 chromosomes at the start of $G_1$, how
                    many chromosomes will it have after the S-phase?
                  </label>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="q2"
                      value="A"
                      id="q2a"
                    />
                    <label class="form-check-label" for="q2a">5 </label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="q2"
                      value="B"
                      id="q2b"
                    />
                    <label class="form-check-label" for="q2b"
                      >10 (but with doubled chromatids)
                    </label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="q2"
                      value="C"
                      id="q2c"
                    />
                    <label class="form-check-label" for="q2c">20</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="q2"
                      value="D"
                      id="q2d"
                    />
                    <label class="form-check-label" for="q2d">0</label>
                  </div>
                </div>
                <hr />
                <!-- Q3 -->
                <div class="mb-3">
                  <label class="form-label fw-bold"
                    >The division of the cytoplasm is called:
                  </label>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="q3"
                      value="A"
                      id="q3a"
                    />
                    <label class="form-check-label" for="q3a">Mitosis </label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="q3"
                      value="B"
                      id="q3b"
                    />
                    <label class="form-check-label" for="q3b">Meiosis</label>
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="q3"
                      value="C"
                      id="q3c"
                    />
                    <label class="form-check-label" for="q3c"
                      >Cytokinesis</label
                    >
                  </div>
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="q3"
                      value="D"
                      id="q3d"
                    />
                    <label class="form-check-label" for="q3d">Synthesis</label>
                  </div>
                </div>
              </div>
            </form>
          </div>

          <div class="modal-footer">
            <button type="button" class="btn btn-success" id="submitExam">
              Submit Answers
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.29/jspdf.plugin.autotable.min.js"></script>
    <script>
      function checkTrueFalse() {
        const questions = {
          tf1: {
            answer: "false",
            reason: "S-phase",
          },
          tf2: {
            answer: "false",
            reason: "it's very active",
          },
          tf3: {
            answer: "true",
            reason:
              "G₁ phase is mainly responsible for cell growth and normal metabolic activities.",
          },
          tf4: {
            answer: "true",
            reason:
              "Cytokinesis occurs after the nucleus has divided during mitosis.",
          },
        };

        Object.keys(questions).forEach((id) => {
          const input = document.getElementById(id);
          const feedback = document.getElementById(id + "-feedback");

          const userAnswer = input.value.trim().toLowerCase();

          const normalized =
            userAnswer === "true" || userAnswer === "t" || userAnswer === "yes"
              ? "true"
              : userAnswer === "false" ||
                userAnswer === "f" ||
                userAnswer === "no"
              ? "false"
              : "";

          if (normalized === questions[id].answer) {
            input.classList.remove("is-invalid");
            input.classList.add("is-valid");
            feedback.innerHTML = "✅ Correct!";
            feedback.className = "valid-feedback d-block";
          } else {
            input.classList.remove("is-valid");
            input.classList.add("is-invalid");
            feedback.innerHTML = `❌ Incorrect. ${questions[id].reason}`;
            feedback.className = "invalid-feedback d-block";
          }
        });
      }
    </script>

    <script>
      $(document).ready(function () {
        const correctAns = {
          ans1: "B",
          ans2: "B",
          ans3: "C",
        };
        const multipleQues = {
          q1: "Which phase involves the actual copying of DNA?",
          q2: "If a cell has 10 chromosomes at the start of $G_1$, how many chromosomes will it have after the S-phase?",
          q3: "The division of the cytoplasm is called:",
        };

        $("#submitExam").click(function () {
          let organelleResults = [];
          let organelleScore = 0;
          let totalOrganelleItems = 0;

          const mAnswers = {
            m1: $('input[name="q1"]:checked').val() || "No answer",
            m2: $('input[name="q2"]:checked').val() || "No answer",
            m3: $('input[name="q3"]:checked').val() || "No answer",
          };

          const name = $('input[name="student_name"]').val();
          const grade_n_section = $('input[name="grade_n_section"]').val();

          /* =======================
         CREATE PDF
      ======================= */
          const doc = new window.jspdf.jsPDF("p", "mm", "a4");

          const pageHeight = doc.internal.pageSize.height;
          const bottomMargin = 20;

          let y = 35;

          function checkPageBreak(extra = 0) {
            if (y + extra > pageHeight - bottomMargin) {
              doc.addPage();
              y = 20;
            }
          }

          /* =======================
         HEADER
      ======================= */
          doc.setFont("helvetica", "bold");
          doc.setFontSize(12);
          doc.setTextColor(0);

          doc.text(`Name: ${name}`, 20, 20);
          doc.text(`Grade and Section: ${grade_n_section}`, 20, 26);

          const today = new Date();
          const formattedDate = today.toLocaleDateString("en-US", {
            year: "numeric",
            month: "long",
            day: "numeric",
          });

          doc.text(`Date: ${formattedDate}`, 130, 20); // =======================
          // PERFORMANCE TASK CARD
          // =======================

          // Card position & size
          const cardX = 15;
          const cardY = y;
          const cardWidth = 180;
          const cardPadding = 6;

          // Text settings
          doc.setTextColor(0, 0, 0);
          doc.setFont("helvetica", "bold");
          doc.setFontSize(14);

          // Title
          doc.text(
            "What I Need to Do (Performance Task)",
            cardX + cardPadding,
            cardY + 10
          );

          // Description
          doc.setFont("helvetica", "normal");
          doc.setFontSize(11);
          doc.text(
            "To demonstrate your understanding, complete the following activity:",
            cardX + cardPadding,
            cardY + 18
          );

          // Project title
          doc.setFont("helvetica", "bold");
          doc.setFontSize(12);
          doc.text(
            'The "Cell Cycle Clock" Project',
            cardX + cardPadding,
            cardY + 26
          );

          // List items
          doc.setFont("helvetica", "normal");
          doc.setFontSize(11);

          const list = [
            "1. Draw a large circle.",
            "2. Divide the circle into sections representing G1, S, G2, and Mitosis (Interphase should take up most of the circle).",
            '3. Inside each section, draw one "key event" (e.g., two sets of DNA in S-phase).',
            "4. Color-code your clock: cool colors for Interphase and warm colors for M-phase.",
          ];

          let listY = cardY + 34;

          list.forEach((item) => {
            const lines = doc.splitTextToSize(item, cardWidth - 12);
            doc.text(lines, cardX + cardPadding, listY);
            listY += lines.length * 6;
          });

          // Page break if needed

          doc.addPage();
          /* =======================
         MULTIPLE QUESTIONS LOOP
======================= */

          y = y + 10;
          for (let i = 1; i <= 3; i++) {
            const q = "q" + i; //questions
            const mAns = "m" + i; //student answer
            const cAns = "ans" + i; //correct answer

            // Question
            doc.setFont("helvetica", "bold");
            doc.setTextColor(0);
            const qText = doc.splitTextToSize(`${i}. ${multipleQues[q]}`, 180);
            doc.text(qText, 14, y);
            y += qText.length * 6;

            // Student answer
            checkPageBreak(10);
            doc.setFont("helvetica", "normal");
            doc.setTextColor(0, 0, 128);
            doc.text(`Your answer: ${mAnswers[mAns]}`, 16, y);
            y += 5;

            // Correct answer
            checkPageBreak(10);
            const correctText = Array.isArray(correctAns[cAns])
              ? correctAns[cAns].join(" or ")
              : correctAns[cAns];

            doc.setTextColor(0, 128, 0);
            doc.text(`Correct answer: ${correctText}`, 16, y);
            y += 5;

            // Check correctness
            const isCorrect = Array.isArray(correctAns[cAns])
              ? correctAns[cAns].includes(mAnswers[mAns])
              : mAnswers[mAns] === correctAns[cAns];

            // Result box
            checkPageBreak(12);
            const mark = isCorrect ? "Correct" : "Wrong";
            const color = isCorrect ? [0, 180, 0] : [200, 0, 0];

            doc.setDrawColor(...color);
            doc.setFillColor(...color);
            doc.setFont("helvetica", "bold");
            doc.setTextColor(255);
            doc.rect(16, y, 40, 6, "FD");
            doc.text(mark, 18, y + 4);
            y += 12;

            // Separator
            doc.setDrawColor(150);
            doc.line(14, y, 196, y);
            y += 6;
          }

          /* =======================
   MULTIPLE QUESTIONS SCORE (FIXED)
======================= */
          let score1 = 0;
          const totalQuestions1 = 3;

          for (let i = 1; i <= totalQuestions1; i++) {
            const answerKey = "m" + i;
            const correctKey = "ans" + i;

            const studentAnswer = mAnswers[answerKey];
            const correctAnswer = correctAns[correctKey];

            const isCorrect = Array.isArray(correctAnswer)
              ? correctAnswer.includes(studentAnswer)
              : studentAnswer === correctAnswer;

            if (isCorrect) score1++;
          }

          doc.setFont("helvetica", "bold");
          doc.setFontSize(12);
          doc.setTextColor(255, 0, 0);
          doc.text(`Score: ${score1} / ${totalQuestions1}`, 14, y);
          // Separator
          doc.setDrawColor(150);
          doc.line(14, y + 6, 196, y + 6);

          y += 20;

          /* =======================
         SAVE & CLOSE
      ======================= */
          doc.save("Lesson 5.pdf");
          $("#examModal").modal("hide");
        });
      });
    </script>
  </body>
</html>
